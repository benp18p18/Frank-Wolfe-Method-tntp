#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include "defines.h"


void trips_find(FILE *, char *trips[NUM_ZONE][NUM_ZONE]);

int main()
{
	FILE *f;
	char* trips[NUM_ZONE][NUM_ZONE];
	f = fopen("ChicagoSketch_trips.tntp", "r");
	trips_find(f, trips);

	fclose(f);
}


void trips_find(fp, trips)
FILE *fp;
char *trips[NUM_ZONE][NUM_ZONE];
{

	int size = 3500000;
	char *btrip;	
	btrip = (char *)malloc(sizeof(char *)*size);

	char *token;
	char *token2;
	char *breaker[NUM_ZONE];
	
	
	fread(btrip, 35, 100000, fp);
	
	token = strtok(btrip, ":");
	token = strtok(NULL, "g");
	
	int i, j;
	for(i = 0; i < NUM_ZONE; i++ )
	{
		token = strtok(NULL, "Origin\t");
		breaker[i] = token;
	}
	 				
	int k;


	for ( i = 0; i < NUM_ZONE; i++)
	{
		for ( j = 0; j < NUM_ZONE; j++)
		{
			trips[i][j] = "0";

		}	

	}	


	for(i = 0; i < NUM_ZONE; i++)
	{	 

							
		token = strtok(breaker[i], ":");
		k = 0;	
		printf("%d\n", i+1);	
		
		while (token != NULL)
		{
			token = strtok(NULL, ":"); 
			token2 = token;
			trips[i][atoi(token2)-1] = token;
			printf("%d\t", atoi(token2));			
			token = strtok(NULL, ";");			 
			
		}
		printf("\n\n\n");

	} 

	
/*	for ( i = 0; i < NUM_ZONE; i++)
	{
		printf("%s\t", trips[385][i]);

	}
*/
	
	

}	




	


